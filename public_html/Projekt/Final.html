<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>Projekt</title>
</head>
<style>
#ta {
    width: 300px;
    line-height: 20px;
}
</style>
<script>
function myFunction() { //Valideerimine vaja lõpetada, et tegemist on numbritega, mitte tekstiga
    var inpObj = document.getElementById("esimene");
    if (inpObj.checkValidity() == false) {
        document.getElementById("esimene").innerHTML = inpObj.validationMessage;
    } else {
        document.getElementById("esimene").innerHTML = "Input OK";
    } 
}

function countLines(){ //Keskväärtus = arvude summa/ridade arv, kus on andmed olemas
	var rows = document.getElementById('esimene').value.split("\n");
	//var lines = document.getElementById('esimene').value.split("\n").length;
	//console.log(rows);
	for (i = 0; i < rows.length; i++){ //Tuleb saada ainult andmetega value, mitte tühjad ka
		if (rows[i] === '' || rows[i] === null){
			//rows.splice(i, 1);
			//delete rows[i];
			//rows.shift();
		}else{	
			var sum = (eval(rows.join('+')));
		}
	}
	
	//Igat elementi kontrollitakse, kas tegemist on tühja reaga või mitte, kui on tühi rida - see kustutakse, kui ei - lisatakse summale juurde.
	
	kv = (sum/i);
	console.log('i vaartus on', i);
	console.log('sum vaartus on', sum);
	console.log('keskvaartus on', kv);
	
	document.getElementById("vArv").innerHTML = rows.length;
	document.getElementById("keskvaartus").innerHTML = kv;
	
	
	var TotalSum = 0;
	
	for (i = 0; i < rows.length; i++){
		//rows[i] = x;
		var vastus = Math.pow(rows[i]-kv, 2);
		TotalSum = TotalSum+vastus;
		//console.log(x);
	}
	var jagatis = TotalSum/(rows.length-1);
	//console.log(x, jagatis);
	var koguVastus = Math.sqrt(jagatis);
	//console.log(koguVastus);
	document.getElementById("standarhalve").innerHTML = koguVastus;
	
}

function myFunction2() { //Valideerimine vaja lõpetada, et tegemist on numbritega, mitte tekstiga
    var inpObj = document.getElementById("teine");
    if (inpObj.checkValidity() == false) {
        document.getElementById("teine").innerHTML = inpObj.validationMessage;
    } else {
        document.getElementById("teine").innerHTML = "Input OK";
    } 
}

function countRows(){ //Keskväärtus = arvude summa/ridade arv, kus on andmed olemas
	var rows2 = document.getElementById('teine').value.split("\n");
	var lines2 = document.getElementById('teine').value.split("\n").length;
	//console.log(rows);
	for (i = 0; i < rows2.length; i++){ //Tuleb saada ainult andmetega value, mitte tühjad ka
		var sum2 =(eval(rows2.join('+')));		
		//if (typeof rows[i] !== 'undefined' && rows[i] !== null) {
			//console.log(i);
			
		//}
	}
	kv2 = (sum2/i);
	document.getElementById("vArv2").innerHTML = lines2;
	document.getElementById("keskvaartus2").innerHTML = kv2;
	
	var TotalSum2 = 0;
	
	for (i = 0; i < rows2.length; i++){
		//rows[i] = x;
		var vastus2 = Math.pow(rows2[i]-kv2, 2);
		TotalSum2 = TotalSum2+vastus2;
		//console.log(x);
	}
	var jagatis2 = TotalSum2/(lines2-1);
	//console.log(x, jagatis);
	var koguVastus2 = Math.sqrt(jagatis2);
	console.log(koguVastus2);
	document.getElementById("standarhalve2").innerHTML = koguVastus2;
}
</script>
<body>
    <div id="prof_picture">
        <form id="testForm2">
          <div style="float:left; position:relative; margin-right: 40px">
            <dl>
				<dt>Esimese grupi vastused</dt>
                <textarea style="width:200px; height:50px;" id="esimene" type="textarea" name="esimene" cols="40"/></textarea>
            </dl>
			
			<dl>
                <input type="button" name="arvutaNupp" id="arvutaNupp"  value="Arvuta" onclick="countLines()"/>
            </dl>
				
			<dl>
				Vastuste arv N =<p id="vArv"></p>
				Keskväärtus M = <p id="keskvaartus"></p>
				Standardhälve SD = <p id="standarhalve"></p>
			</dl>
          </div>
		  
		  <div style="float:left; position: relative; margin-left: 40px">
            <dl>
				<dt>Teise grupi vastused</dt>
                <textarea style="width:200px; height:50px;" id="teine" type="textarea" name="teine" cols="40"/></textarea>
            </dl>
      
            <dl>
                <input type="button" name="arvutaNupp2" id="arvutaNupp2" value="Arvuta" onclick="countRows()"/>
            </dl>
			
			<dl>
				Vastuste arv N = <p id="vArv2"></p>
				Keskväärtus M = <p id="keskvaartus2"></p>
				Standardhälve SD = <p id="standarhalve2"></p>
			</dl>
			</div>
        </form>
	</div>

</body>
</html>